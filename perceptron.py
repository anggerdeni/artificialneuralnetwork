datas = open('data', 'r').read().split('\n')
train_data = []
for i in datas:
    train_data.append((i[0], i[1:]))

ALFA = 0.5
b = [0 for j in range(2)]
threshold = 0.2
w = [[0 for i in range(81)] for j in range(2)]

target = {
    'A': [1, -1],
    'B': [-1, 1]
}

epoch = 0
flag = False
# while not flag:
for epoch in range(30000):
    flag = True
    if epoch % 100 == 0: print "epoch-{}".format(epoch)
    for i in range(len(train_data)):
        t = target[train_data[i][0]]

        x = [int(inp) for inp in train_data[i][1]]
        y = [0 for j in range(2)]
        for j in range(2):
            y_in_j = b[j] + sum([xi*wi for xi,wi in zip(x,w[j])])

            if y_in_j > threshold:
                y[j] = 1
            elif -threshold <= y_in_j <= threshold:
                y[j] = 0
            else:
                y[j] = -1
            
            if(y != t):
                b[j] = b[j] + t[j]
                w[j] = [wi + ALFA*t[j]*xi for xi,wi in zip(x,w[j])]
                flag = False
    epoch += 1
for j in range(2):
    print '*'*50
    for i in range(9):
        print w[j][i*9:i*9+9]
    print "\n{}".format(b[j])


"""
A : 30000 epoch
[-15000.0, -30000.0, -45000.0, 60000.0, 465000.0, 150000.0, 0.0, 0.0, 15000.0]
[0.0, -135000.0, -270000.0, 0.0, -15000.0, 240000.0, -30000.0, 0.0, 15000.0]
[-15000.0, -135000.0, -135000.0, 375000.0, -15000.0, 225000.0, 165000.0, 0.0, 0.0]
[0.0, -135000.0, 315000.0, 45000.0, 90000.0, -180000.0, 450000.0, 15000.0, 15000.0]
[-15000.0, -150000.0, 270000.0, -180000.0, -210000.0, -60000.0, 480000.0, 30000.0, 15000.0]
[-15000.0, 285000.0, 150000.0, 150000.0, 240000.0, 105000.0, 330000.0, 450000.0, 0.0]
[0.0, 405000.0, -75000.0, 15000.0, 45000.0, -180000.0, 60000.0, 540000.0, 30000.0]
[405000.0, 45000.0, -150000.0, -270000.0, -300000.0, -150000.0, 15000.0, 390000.0, 195000.0]
[495000.0, -60000.0, -120000.0, -240000.0, -150000.0, -60000.0, 60000.0, 75000.0, 495000.0]

b = 300000
**************************************************
B 30000 epoch
[15000.0, 30000.0, 30003.5, 68842.0, -18854.5, 12651.5, 0.0, 0.0, 0.0]
[15000.0, 30088.0, 15107.0, 71279.5, -4436.5, 45018.5, 45000.0, 0.0, 0.0]
[15000.0, 38918.0, 15019.0, 66688.0, -51722.0, -3754.0, 42651.5, 0.0, 0.0]
[15000.0, 30088.5, -18838.0, 51157.5, -27655.5, 2451.5, 14956.0, -4456.5, 0.0]
[15000.0, 45088.5, -8264.5, 70661.0, 77397.5, -12567.5, -33856.0, -11187.5, 0.0]
[15000.0, -23199.5, -27825.5, 77161.5, -12840.0, -27820.5, 17075.0, -60019.0, 0.0]
[0.5, -44955.0, -4444.5, 55538.5, -49455.0, 10644.5, 10538.0, -75043.5, -4456.5]
[-48828.5, 3870.0, 20.0, 150011.5, 60102.5, 75037.5, -14998.0, -51191.5, -23855.5]
[-60023.5, 70.5, 93.5, 105095.0, 90036.0, 45004.5, -59998.0, -30017.5, -60024.0]

b = 120130
"""


"""
A = [-5000.0, -10000.0, -15000.0, 20000.0, 155000.0, 50000.0, 0.0, 0.0, 5000.0, 0.0, -45000.0, -90000.0, 0.0, -5000.0, 80000.0, -10000.0, 0.0, 5000.0, -5000.0, -45000.0, -45000.0, 125000.0, -5000.0, 75000.0, 55000.0, 0.0, 0.0, 0.0, -45000.0, 105000.0, 15000.0, 30000.0, -60000.0, 150000.0, 5000.0, 5000.0, -5000.0, -50000.0, 90000.0, -60000.0, -70000.0, -20000.0, 160000.0, 10000.0, 5000.0, -5000.0, 95000.0, 50000.0, 50000.0, 80000.0, 35000.0, 110000.0, 150000.0, 0.0, 0.0, 135000.0, -25000.0, 5000.0, 15000.0, -60000.0, 20000.0, 180000.0, 10000.0, 135000.0, 15000.0, -50000.0, -90000.0, -100000.0, -50000.0, 5000.0, 130000.0, 65000.0, 165000.0, -20000.0, -40000.0, -80000.0, -50000.0, -20000.0, 20000.0, 25000.0, 165000.0]
B = [5000.0, 10000.0, 10003.5, 22949.0, -6320.0, 4212.0, 0.0, 0.0, 0.0, 5000.0, 10088.0, 5107.0, 23814.0, -1462.5, 15006.5, 15000.0, 0.0, 0.0,5000.0, 13025.0, 5019.0, 22196.5, -17242.5, -1219.5, 14212.0, 0.0, 0.0,5000.0, 10088.5, -6303.5, 17038.5, -9228.0, 879.0, 4944.0, -1482.5, 0.0,5000.0, 15088.5, -2756.0, 23568.0, 25825.0, -4140.0, -11321.5, -3734.0, 0.0,5000.0, -7691.0, -9239.0, 25748.0, -4253.5, -9234.0, 5661.5, -20031.0, 0.0,0.5, -14967.0, -1470.5, 18512.5, -16481.0, 3618.5, 3512.0, -25055.5, -1482.5,-16294.0, 1323.5, 20.0, 50011.5, 20102.5, 25037.5, -4998.0, -17084.5, -7974.5,-20035.5, 70.5, 93.5, 35095.0, 30036.0, 15004.5, -19998.0, -10017.5, -20036.0]
"""